<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Güzellik Salonu - Yönetim Paneli</title>
    <link rel="stylesheet" href="admin.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js";
        import { getAuth } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getDatabase } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";
        
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAKZslnECwA0wwMAhfHarE3wMLXoq7TVlk",
            authDomain: "veliogluglobal-86631.firebaseapp.com",
            databaseURL: "https://veliogluglobal-86631-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "veliogluglobal-86631",
            storageBucket: "veliogluglobal-86631.firebasestorage.app",
            messagingSenderId: "643623290439",
            appId: "1:643623290439:web:a61c004610ceb9e1105362",
            measurementId: "G-0DWT8BV4C5"
        };
        
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const database = getDatabase(app);
        
        // Make Firebase available globally
        window.firebase = { app, analytics, auth, db, database };
    </script>
</head>
<body>
    <!-- Admin Header -->
    <header class="admin-header">
        <div class="header-content">
            <div class="header-left">
                <div class="logo">
                    <i class="fas fa-spa"></i>
                    <span>Güzellik Salonu</span>
                </div>
                <div class="breadcrumb">
                    <span>Yönetim Paneli</span>
                </div>
            </div>
            <div class="header-right">
                <div class="user-info">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-details">
                        <span class="user-name">Admin</span>
                        <span class="user-role">Yönetici</span>
                    </div>
                </div>
                <button class="logout-btn" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Admin Sidebar -->
    <aside class="admin-sidebar">
        <nav class="sidebar-nav">
            <div class="nav-section">
                <h3>Ana Menü</h3>
                <ul>
                    <li class="nav-item active" data-tab="dashboard">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Dashboard</span>
                    </li>
                    <li class="nav-item" data-tab="appointments">
                        <i class="fas fa-calendar-alt"></i>
                        <span>Randevular</span>
                        <span class="badge" id="appointment-badge">0</span>
                    </li>
                    <li class="nav-item" data-tab="customers">
                        <i class="fas fa-users"></i>
                        <span>Müşteriler</span>
                        <span class="badge" id="customer-badge">0</span>
                    </li>
                    <li class="nav-item" data-tab="staff">
                        <i class="fas fa-user-tie"></i>
                        <span>Personel</span>
                    </li>
                </ul>
            </div>
            
            <div class="nav-section">
                <h3>Muhasebe</h3>
                <ul>
                    <li class="nav-item" data-tab="revenue">
                        <i class="fas fa-chart-line"></i>
                        <span>Gelir-Gider</span>
                    </li>
                    <li class="nav-item" data-tab="reports">
                        <i class="fas fa-chart-bar"></i>
                        <span>Raporlar</span>
                    </li>
                    <li class="nav-item" data-tab="expenses">
                        <i class="fas fa-receipt"></i>
                        <span>Giderler</span>
                    </li>
                </ul>
            </div>
            
            <div class="nav-section">
                <h3>Hizmetler</h3>
                <ul>
                    <li class="nav-item" data-tab="services">
                        <i class="fas fa-spa"></i>
                        <span>Hizmet Yönetimi</span>
                    </li>
                    <li class="nav-item" data-tab="packages">
                        <i class="fas fa-gift"></i>
                        <span>Paketler</span>
                    </li>
                </ul>
            </div>
            
            <div class="nav-section">
                <h3>İletişim</h3>
                <ul>
                    <li class="nav-item" data-tab="messages">
                        <i class="fab fa-whatsapp"></i>
                        <span>WhatsApp</span>
                        <span class="badge" id="message-badge">0</span>
                    </li>
                    <li class="nav-item" data-tab="notifications">
                        <i class="fas fa-bell"></i>
                        <span>Bildirimler</span>
                    </li>
                </ul>
            </div>
            
            <div class="nav-section">
                <h3>Sistem</h3>
                <ul>
                    <li class="nav-item" data-tab="settings">
                        <i class="fas fa-cog"></i>
                        <span>Ayarlar</span>
                    </li>
                    <li class="nav-item" data-tab="backup">
                        <i class="fas fa-database"></i>
                        <span>Yedekleme</span>
                    </li>
                </ul>
            </div>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="admin-main">
        <!-- Dashboard Tab -->
        <div id="dashboard-tab" class="tab-content active">
            <div class="page-header">
                <h1>Dashboard</h1>
                <div class="page-actions">
                    <button class="btn btn-primary" onclick="refreshDashboard()">
                        <i class="fas fa-sync-alt"></i> Yenile
                    </button>
                </div>
            </div>
            
            <!-- Stats Cards -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="today-appointments">0</h3>
                        <p>Bugünkü Randevular</p>
                        <span class="stat-change positive">+12%</span>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-lira-sign"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="today-revenue">0₺</h3>
                        <p>Bugünkü Gelir</p>
                        <span class="stat-change positive">+8%</span>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="total-customers">0</h3>
                        <p>Toplam Müşteri</p>
                        <span class="stat-change positive">+5%</span>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="satisfaction-rate">98%</h3>
                        <p>Müşteri Memnuniyeti</p>
                        <span class="stat-change positive">+2%</span>
                    </div>
                </div>
            </div>
            
            <!-- Charts Row -->
            <div class="charts-row">
                <div class="chart-container">
                    <div class="chart-header">
                        <h3>Haftalık Gelir</h3>
                        <div class="chart-controls">
                            <select id="revenue-period">
                                <option value="week">Bu Hafta</option>
                                <option value="month">Bu Ay</option>
                                <option value="year">Bu Yıl</option>
                            </select>
                        </div>
                    </div>
                    <canvas id="revenue-chart"></canvas>
                </div>
                
                <div class="chart-container">
                    <div class="chart-header">
                        <h3>Hizmet Dağılımı</h3>
                    </div>
                    <canvas id="services-chart"></canvas>
                </div>
            </div>
            
            <!-- Recent Activity -->
            <div class="activity-section">
                <div class="section-header">
                    <h3>Son Aktiviteler</h3>
                    <button class="btn btn-secondary" onclick="viewAllActivities()">Tümünü Gör</button>
                </div>
                <div class="activity-list" id="recent-activities">
                    <!-- Activities will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Appointments Tab -->
        <div id="appointments-tab" class="tab-content">
            <div class="page-header">
                <h1>Randevu Yönetimi</h1>
                <div class="page-actions">
                    <button class="btn btn-primary" onclick="showAddAppointmentModal()">
                        <i class="fas fa-plus"></i> Yeni Randevu
                    </button>
                    <button class="btn btn-secondary" onclick="exportAppointments()">
                        <i class="fas fa-download"></i> Dışa Aktar
                    </button>
                </div>
            </div>
            
            <!-- Filters -->
            <div class="filters-section">
                <div class="filter-group">
                    <label>Durum</label>
                    <select id="appointment-status-filter">
                        <option value="">Tümü</option>
                        <option value="pending">Beklemede</option>
                        <option value="confirmed">Onaylandı</option>
                        <option value="completed">Tamamlandı</option>
                        <option value="cancelled">İptal</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Tarih</label>
                    <input type="date" id="appointment-date-filter">
                </div>
                <div class="filter-group">
                    <label>Personel</label>
                    <select id="appointment-staff-filter">
                        <option value="">Tümü</option>
                    </select>
                </div>
                <div class="filter-group">
                    <button class="btn btn-primary" onclick="filterAppointments()">
                        <i class="fas fa-filter"></i> Filtrele
                    </button>
                </div>
            </div>
            
            <!-- Appointments Table -->
            <div class="table-container">
                <table class="data-table" id="appointments-table">
                    <thead>
                        <tr>
                            <th>Müşteri</th>
                            <th>Hizmet</th>
                            <th>Tarih/Saat</th>
                            <th>Personel</th>
                            <th>Durum</th>
                            <th>Tutar</th>
                            <th>İşlemler</th>
                        </tr>
                    </thead>
                    <tbody id="appointments-tbody">
                        <!-- Appointments will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Customers Tab -->
        <div id="customers-tab" class="tab-content">
            <div class="page-header">
                <h1>Müşteri Yönetimi</h1>
                <div class="page-actions">
                    <button class="btn btn-primary" onclick="showAddCustomerModal()">
                        <i class="fas fa-plus"></i> Yeni Müşteri
                    </button>
                    <button class="btn btn-secondary" onclick="sendBulkMessage()">
                        <i class="fab fa-whatsapp"></i> Toplu Mesaj
                    </button>
                </div>
            </div>
            
            <!-- Customer Stats -->
            <div class="customer-stats">
                <div class="stat-item">
                    <h4>Toplam Müşteri</h4>
                    <span id="total-customers-count">0</span>
                </div>
                <div class="stat-item">
                    <h4>Yeni Müşteriler (Bu Ay)</h4>
                    <span id="new-customers-count">0</span>
                </div>
                <div class="stat-item">
                    <h4>VIP Müşteriler</h4>
                    <span id="vip-customers-count">0</span>
                </div>
            </div>
            
            <!-- Customer Search -->
            <div class="search-section">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="customer-search" placeholder="Müşteri ara...">
                </div>
                <div class="search-filters">
                    <select id="customer-filter">
                        <option value="">Tüm Müşteriler</option>
                        <option value="vip">VIP Müşteriler</option>
                        <option value="new">Yeni Müşteriler</option>
                        <option value="inactive">Pasif Müşteriler</option>
                    </select>
                </div>
            </div>
            
            <!-- Customers Grid -->
            <div class="customers-grid" id="customers-grid">
                <!-- Customers will be loaded here -->
            </div>
        </div>

        <!-- Staff Tab -->
        <div id="staff-tab" class="tab-content">
            <div class="page-header">
                <h1>Personel Yönetimi</h1>
                <div class="page-actions">
                    <button class="btn btn-primary" onclick="showAddStaffModal()">
                        <i class="fas fa-plus"></i> Yeni Personel
                    </button>
                </div>
            </div>
            
            <!-- Staff Performance -->
            <div class="staff-performance">
                <h3>Personel Performansı</h3>
                <div class="performance-grid" id="staff-performance-grid">
                    <!-- Staff performance will be loaded here -->
                </div>
            </div>
            
            <!-- Staff List -->
            <div class="staff-list" id="staff-list">
                <!-- Staff will be loaded here -->
            </div>
        </div>

        <!-- Revenue Tab -->
        <div id="revenue-tab" class="tab-content">
            <div class="page-header">
                <h1>Gelir-Gider Takibi</h1>
                <div class="page-actions">
                    <button class="btn btn-primary" onclick="showAddExpenseModal()">
                        <i class="fas fa-plus"></i> Gider Ekle
                    </button>
                    <button class="btn btn-secondary" onclick="generateReport()">
                        <i class="fas fa-chart-bar"></i> Rapor Oluştur
                    </button>
                </div>
            </div>
            
            <!-- Revenue Overview -->
            <div class="revenue-overview">
                <div class="revenue-card">
                    <h3>Bu Ay Gelir</h3>
                    <span class="amount" id="monthly-revenue">0₺</span>
                    <div class="trend positive">
                        <i class="fas fa-arrow-up"></i> +12%
                    </div>
                </div>
                <div class="revenue-card">
                    <h3>Bu Ay Gider</h3>
                    <span class="amount" id="monthly-expenses">0₺</span>
                    <div class="trend negative">
                        <i class="fas fa-arrow-up"></i> +5%
                    </div>
                </div>
                <div class="revenue-card">
                    <h3>Net Kar</h3>
                    <span class="amount" id="net-profit">0₺</span>
                    <div class="trend positive">
                        <i class="fas fa-arrow-up"></i> +8%
                    </div>
                </div>
            </div>
            
            <!-- Revenue Chart -->
            <div class="chart-container">
                <div class="chart-header">
                    <h3>Gelir-Gider Grafiği</h3>
                    <div class="chart-controls">
                        <select id="revenue-chart-period">
                            <option value="month">Bu Ay</option>
                            <option value="quarter">Bu Çeyrek</option>
                            <option value="year">Bu Yıl</option>
                        </select>
                    </div>
                </div>
                <canvas id="revenue-expense-chart"></canvas>
            </div>
            
            <!-- Recent Transactions -->
            <div class="transactions-section">
                <h3>Son İşlemler</h3>
                <div class="transactions-list" id="recent-transactions">
                    <!-- Transactions will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Reports Tab -->
        <div id="reports-tab" class="tab-content">
            <div class="page-header">
                <h1>Raporlar</h1>
                <div class="page-actions">
                    <button class="btn btn-primary" onclick="generateMonthlyReport()">
                        <i class="fas fa-file-pdf"></i> Aylık Rapor
                    </button>
                    <button class="btn btn-secondary" onclick="generateCustomerReport()">
                        <i class="fas fa-users"></i> Müşteri Raporu
                    </button>
                </div>
            </div>
            
            <!-- Report Filters -->
            <div class="report-filters">
                <div class="filter-group">
                    <label>Rapor Türü</label>
                    <select id="report-type">
                        <option value="financial">Finansal Rapor</option>
                        <option value="customer">Müşteri Raporu</option>
                        <option value="staff">Personel Raporu</option>
                        <option value="service">Hizmet Raporu</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Başlangıç Tarihi</label>
                    <input type="date" id="report-start-date">
                </div>
                <div class="filter-group">
                    <label>Bitiş Tarihi</label>
                    <input type="date" id="report-end-date">
                </div>
                <div class="filter-group">
                    <button class="btn btn-primary" onclick="generateReport()">
                        <i class="fas fa-chart-line"></i> Rapor Oluştur
                    </button>
                </div>
            </div>
            
            <!-- Report Results -->
            <div class="report-results" id="report-results">
                <!-- Report results will be displayed here -->
            </div>
        </div>

        <!-- Settings Tab -->
        <div id="settings-tab" class="tab-content">
            <div class="page-header">
                <h1>Sistem Ayarları</h1>
            </div>
            
            <!-- Settings Sections -->
            <div class="settings-sections">
                <div class="settings-section">
                    <h3>Genel Ayarlar</h3>
                    <div class="setting-item">
                        <label>Salon Adı</label>
                        <input type="text" id="salon-name" value="Güzellik Salonu">
                    </div>
                    <div class="setting-item">
                        <label>Telefon</label>
                        <input type="tel" id="salon-phone" value="+90 212 555 0123">
                    </div>
                    <div class="setting-item">
                        <label>E-posta</label>
                        <input type="email" id="salon-email" value="info@guzelliksalonu.com">
                    </div>
                    <div class="setting-item">
                        <label>Adres</label>
                        <textarea id="salon-address">Merkez Mahallesi, Güzellik Sokak No:123, İstanbul</textarea>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3>Randevu Ayarları</h3>
                    <div class="setting-item">
                        <label>Otomatik Onay</label>
                        <input type="checkbox" id="auto-confirm-setting">
                    </div>
                    <div class="setting-item">
                        <label>Hatırlatma Saati (saat öncesi)</label>
                        <input type="number" id="reminder-hours-setting" min="1" max="24" value="6">
                    </div>
                    <div class="setting-item">
                        <label>WhatsApp Hatırlatma</label>
                        <input type="checkbox" id="whatsapp-reminder-setting">
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3>Güvenlik</h3>
                    <div class="setting-item">
                        <label>Admin Şifresi Değiştir</label>
                        <input type="password" id="new-password" placeholder="Yeni şifre">
                    </div>
                    <div class="setting-item">
                        <label>Şifreyi Onayla</label>
                        <input type="password" id="confirm-password" placeholder="Şifreyi onayla">
                    </div>
                </div>
            </div>
            
            <div class="settings-actions">
                <button class="btn btn-primary" onclick="saveSettings()">
                    <i class="fas fa-save"></i> Ayarları Kaydet
                </button>
                <button class="btn btn-secondary" onclick="resetSettings()">
                    <i class="fas fa-undo"></i> Sıfırla
                </button>
            </div>
        </div>
    </main>

    <!-- Modals -->
    <div id="add-appointment-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Yeni Randevu</h3>
                <button class="close-btn" onclick="closeModal('add-appointment-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="add-appointment-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Müşteri</label>
                            <input type="text" id="appointment-customer" placeholder="Müşteri adı">
                        </div>
                        <div class="form-group">
                            <label>Telefon</label>
                            <input type="tel" id="appointment-phone" placeholder="Telefon numarası">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Hizmet</label>
                            <select id="appointment-service">
                                <option value="">Hizmet seçin</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Personel</label>
                            <select id="appointment-staff">
                                <option value="">Personel seçin</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Tarih</label>
                            <input type="date" id="appointment-date">
                        </div>
                        <div class="form-group">
                            <label>Saat</label>
                            <input type="time" id="appointment-time">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Notlar</label>
                        <textarea id="appointment-notes" rows="3"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('add-appointment-modal')">İptal</button>
                <button class="btn btn-primary" onclick="saveAppointment()">Kaydet</button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Yükleniyor...</p>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="notification-toast" class="notification-toast">
        <div class="toast-content">
            <i class="toast-icon"></i>
            <span class="toast-message"></span>
        </div>
    </div>

    <script src="admin.js"></script>
</body>
</html>
